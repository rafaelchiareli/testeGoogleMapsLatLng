@model testeBuscarLatitudeLongitude.Models.Endereco

@{
    ViewData["Title"] = "Home Page";
}

<form asp-action="Index">
    <div class="row">
        <div>
            <div class="col-md-2">
                <label asp-for="Tipo" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Tipo" class="form-control" value="Rua"/>

            </div>
        </div>

        <div>
            <div class="col-md-2">
                <label asp-for="Logradouro" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Logradouro" class="form-control" value="O" />

            </div>
        </div>

        <div>
            <div class="col-md-2">
                <label asp-for="Numero" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Numero" class="form-control" value="353" />

            </div>
        </div>

        <div>
            <div class="col-md-2">
                <label asp-for="Bairro" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Bairro" class="form-control" value="Vale do Sol"/>

            </div>
        </div>

        <div>
            <div class="col-md-2">
                <label asp-for="Cidade" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Cidade" class="form-control" value="Pinheiral" />

            </div>
        </div>

        <div>
            <div class="col-md-2">
                <label asp-for="Estado" class="form-labek"></label>
            </div>

            <div class="col-md-2">
                <input asp-for="Estado" class="form-control" value="RJ" />

            </div>
        </div>

    </div>
    <button type="submit" class="btn btn-success">Salvar</button>
    <div class="row">
        <label>Latitude =  @ViewBag.latitude</label>
        <label>Longitude = @ViewBag.longitude</label>
        <label>Place id = @ViewBag.place_id</label>

    </div>
</form>

<div id="map"></div>


@section Scripts{
    <script>
        const latitude = "@ViewBag.latitude";
        const longitude = "@ViewBag.longitude";
    </script>

    <script>
        console.log("lat", latitude, "lng", longitude);
        console.log("lat", parseFloat(latitude.replace(',', '.')), "lng", parseFloat(longitude.replace(',', '.')));
        
        if (latitude != "" && longitude != "") {
            function initMap() {
                // The location of Uluru
                const uluru = { lat: parseFloat(latitude.replace(',', '.')), lng: parseFloat(longitude.replace(',', '.')) };
                // The map, centered at Uluru
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 16,
                    center: uluru,
                    
                });
                // The marker, positioned at Uluru
                const marker = new google.maps.Marker({
                    position: uluru,
                    map: map,
                });
            }

            window.initMap = initMap;

        }


        
       

    </script>


}